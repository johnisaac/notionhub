$("feedback").observe("click",function(b){var a="<div id='feedback_div' class='span-12 prepend-top push-5'><br/><label>What do you think about NotionHub?</label><br /><textarea id='feedback_content' rows='5' cols='50'></textarea><br /><input type='radio' name='rating' value='2'>Its Great</input><input type='radio' name='rating' value='1'>OK</input><input type='radio' name='rating' value='-2'>I don't like it</input><br/><input type='button' id='feedback_submit' value='Submit your feedback'></input><input type='button' id='feedback_cancel' value='Cancel' onclick=''></input></div";$("footer").insert({after:a});$("feedback_submit").disable();["header","content","footer"].each(function(c){$(c).addClassName("grayout");$$(c+" *").each(function(d){d.writeAttribute("disabled",true)})});$("feedback_cancel").observe("click",function(c){["header","content","footer"].each(function(d){$(d).removeClassName("grayout");$$(d+" *").each(function(e){e.removeAttribute("disabled")})});$("feedback_div").hide()});$("feedback_submit").observe("click",function(c){var d=new Hash();d.feedback_content=$("feedback_content").getValue();$$("input[name=rating]").each(function(e){if(e.getValue()!==null){d.rating=e.getValue()}});new Ajax.Request("/feedbacks",{method:"post",parameters:{feedback_content:d.feedback_content,rating:d.rating},onSuccess:function(e){var f="<div id='thank_you'><b>We really appreciate your feedback. Thanks!!!</b><br/><input type='button' id='close_feedback' value='   Close   '></input></div>";$("feedback_div").update(f);$("close_feedback").observe("click",function(g){["header","content","footer"].each(function(h){$(h).removeClassName("grayout");$$(h+" *").each(function(i){i.removeAttribute("disabled")})});$("feedback_div").hide()})},onFailure:function(e){var f="<div id='thank_you'><b>We are having some trouble while processing your feedback. Could you please try again.We appreciate your effort and kindly request you to mail us at notionhub@gmail.com if the problem persists. Thanks!!!</b><br/><input type='button' id='close_feedback' value='   Close   '></input></div>";$("feedback_div").update(f);$("close_feedback").observe("click",function(g){["header","content","footer"].each(function(h){$(h).removeClassName("grayout");$$(h+" *").each(function(i){i.removeAttribute("disabled")})});$("feedback_div").hide()})}})});$$("input[name=rating]").each(function(c){$(c).observe("click",function(d){$("feedback_submit").enable()})});$("feedback_content").observe("keyup",function(c){if(($("feedback_content").getValue().length>0)&&($("feedback_content").getValue().replace(/^\s+|\s+$/g,"").length>0)){$("feedback_submit").enable()}else{$("feedback_submit").disable()}})});